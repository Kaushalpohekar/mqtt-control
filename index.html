<!DOCTYPE html>
<html>
  <head>
    <title>MQTT Data Sender</title>
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.css" rel="stylesheet"
    />
    <!-- MDB -->
    <script
type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.1/mdb.min.js"
    ></script>
  </head>
  <body>
    <!-- Image and text -->
    <nav class="navbar navbar-light" style="background-color: #4350af">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <img
            src="assets/favicon.ico"
            class="me-2"
            height="50px"
            width="50px"

            loading="lazy"
          />
          <h4 class="text-light mt-2" style="margin-left: 10px;"> SenseLive AHU Controlling System</h4>
        </a>
      </div>
    </nav>

    <div
      class="container d-flex justify-content-center align-items-center"
      style="height: 80vh"
    >
      <div
        class="card"
        style="background-color: #f3dcdc; height: 120px; width: 400px"
      >
        <div class="card-body">
          <h2 class="d-flex justify-content-center">AHU Controlling System</h2>
          <div class="d-flex justify-content-around">
            <button id="onBtn" class="btn btn-success">On</button>
            <button id="offBtn" class="btn btn-danger">Off</button>
          </div>
        </div>
      </div>
    </div>
    <footer
      class="bg-light text-center text-lg-start"
      style="position: fixed; bottom: 0; width: 100%"
    >
      <!-- Copyright -->
      <div class="text-center p-3 text-light" style="background-color: #4350af">
        Powered by
        <a class="text-dark" href="https://senselive.in"
          ><u class="text-light">@Senslive Technologies</u>
        </a>
      </div>
      <!-- Copyright -->
    </footer>

    <script>
      // Function to send "on" or "off" status to the MQTT broker
      function sendData(status) {
        fetch("/send-data", {
          method: "POST",
          headers: {
            "Content-Type": "text/plain",
          },
          body: status,
        })
          .then((response) => {
            if (response.ok) {
              console.log(`Status "${status}" sent successfully.`);
            } else {
              console.error(`Failed to send status "${status}".`);
            }
          })
          .catch((error) => {
            console.error("Error sending data:", error);
          });
      }

      // Event listeners for the buttons
      document.getElementById("onBtn").addEventListener("click", () => {
        sendData("on");
      });

      document.getElementById("offBtn").addEventListener("click", () => {
        sendData("off");
      });
    </script>
  </body>
</html>
